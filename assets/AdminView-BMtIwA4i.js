import{r as f,w as k,o as b,c as _,a as e,b as y,d as i,v as d,e as v,_ as $,f as w,p as x,g as P,F as C,h as U,i as g,t as p}from"./index-GcaC_OB8.js";const q={class:"modal fade",id:"editMyCourseModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true","data-bs-backdrop":"static"},S={class:"modal-dialog"},E={class:"modal-content"},I=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"editPerfumeModalLabel"},"编辑香水"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),D={class:"modal-body"},F={class:"mb-3"},L=e("label",{for:"title",class:"form-label"},"名稱",-1),B={class:"mb-3"},A=e("label",{for:"category",class:"form-label"},"類別",-1),N={class:"mb-3"},j=e("label",{for:"price",class:"form-label"},"價格",-1),O={class:"mb-3"},T=e("label",{for:"unit",class:"form-label"},"容量",-1),z={class:"mb-3"},G=e("label",{for:"image",class:"form-label"},"圖片連結",-1),H={__name:"EditPerfumeModal",props:{product:Object},emits:["update"],setup(r,{emit:u}){const l=r,m=u,s=f({});k(()=>l.product,t=>{s.value={...t}},{deep:!0,immediate:!0});const c=async()=>{console.log(s.value);try{const t=await v.patch(`https://perfume-express.onrender.com/perfumes/${s.value._id}`,s.value);s.value=t.data,console.log(s.value),m("update")}catch(t){console.error(t)}};return(t,o)=>(b(),_("div",q,[e("div",S,[e("div",E,[I,e("div",D,[e("form",{onSubmit:o[5]||(o[5]=y((...a)=>t.submitForm&&t.submitForm(...a),["prevent"]))},[e("div",F,[L,i(e("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":o[0]||(o[0]=a=>s.value.title=a),required:""},null,512),[[d,s.value.title]])]),e("div",B,[A,i(e("input",{type:"text",class:"form-control",id:"category","onUpdate:modelValue":o[1]||(o[1]=a=>s.value.category=a),required:""},null,512),[[d,s.value.category]])]),e("div",N,[j,i(e("input",{type:"number",class:"form-control",id:"price","onUpdate:modelValue":o[2]||(o[2]=a=>s.value.price=a),required:""},null,512),[[d,s.value.price,void 0,{number:!0}]])]),e("div",O,[T,i(e("input",{type:"text",class:"form-control",id:"unit","onUpdate:modelValue":o[3]||(o[3]=a=>s.value.unit=a),required:""},null,512),[[d,s.value.unit]])]),e("div",z,[G,i(e("input",{type:"url",class:"form-control",id:"image","onUpdate:modelValue":o[4]||(o[4]=a=>s.value.image=a),required:""},null,512),[[d,s.value.image]])]),e("button",{type:"submit",class:"btn btn-primary","aria-label":"Close","data-bs-dismiss":"modal",onClick:c}," 保存 ")],32)])])])]))}},n=r=>(x("data-v-19e2707f"),r=r(),P(),r),J={class:"modal fade",id:"createPerfumeModal",tabindex:"-1","aria-labelledby":"createPerfumeModalLabel","aria-hidden":"true","data-bs-backdrop":"static"},K={class:"modal-dialog"},Q={class:"modal-content"},R=n(()=>e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"createPerfumeModalLabel"},"新增香水"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),W={class:"modal-body"},X={class:"mb-3"},Y=n(()=>e("label",{for:"title",class:"form-label"},"名稱",-1)),Z={class:"mb-3"},ee=n(()=>e("label",{for:"category",class:"form-label"},"類別",-1)),te={class:"mb-3"},oe=n(()=>e("label",{for:"price",class:"form-label"},"售價",-1)),se={class:"mb-3"},le=n(()=>e("label",{for:"originPrice",class:"form-label"},"原價",-1)),ae={class:"mb-3"},ie=n(()=>e("label",{for:"unit",class:"form-label"},"庫存單位",-1)),re={class:"mb-3"},de=n(()=>e("label",{for:"image",class:"form-label"},"圖片連結",-1)),ne={class:"mb-3 form-check"},ce=n(()=>e("label",{for:"isEnabled",class:"form-check-label"},"啟用",-1)),ue=n(()=>e("button",{type:"submit",class:"btn btn-primary","aria-label":"Close","data-bs-dismiss":"modal"}," 保存 ",-1)),me={__name:"CreatePerfumeModal",emits:["update"],setup(r,{emit:u}){const l=f({title:"",category:"",price:0,unit:"",image:""}),m=u,s=async()=>{try{const c=await v.post("https://perfume-express.onrender.com/perfumes",l.value);console.log(c.data),l.value={title:"",category:"",price:0,unit:"",image:""},m("update")}catch(c){console.log("Failed to create perfume:",c)}};return(c,t)=>(b(),_("div",J,[e("div",K,[e("div",Q,[R,e("div",W,[e("form",{onSubmit:y(s,["prevent"])},[e("div",X,[Y,i(e("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":t[0]||(t[0]=o=>l.value.title=o),required:""},null,512),[[d,l.value.title]])]),e("div",Z,[ee,i(e("input",{type:"text",class:"form-control",id:"category","onUpdate:modelValue":t[1]||(t[1]=o=>l.value.category=o),required:""},null,512),[[d,l.value.category]])]),e("div",te,[oe,i(e("input",{type:"number",class:"form-control",id:"price","onUpdate:modelValue":t[2]||(t[2]=o=>l.value.price=o),required:""},null,512),[[d,l.value.price,void 0,{number:!0}]])]),e("div",se,[le,i(e("input",{type:"number",class:"form-control",id:"originPrice","onUpdate:modelValue":t[3]||(t[3]=o=>l.value.originPrice=o),required:""},null,512),[[d,l.value.originPrice,void 0,{number:!0}]])]),e("div",ae,[ie,i(e("input",{type:"text",class:"form-control",id:"unit","onUpdate:modelValue":t[4]||(t[4]=o=>l.value.unit=o),required:""},null,512),[[d,l.value.unit]])]),e("div",re,[de,i(e("input",{type:"url",class:"form-control",id:"image","onUpdate:modelValue":t[5]||(t[5]=o=>l.value.image=o),required:""},null,512),[[d,l.value.image]])]),e("div",ne,[i(e("input",{type:"checkbox",class:"form-check-input",id:"isEnabled","onUpdate:modelValue":t[6]||(t[6]=o=>l.value.isEnabled=o)},null,512),[[w,l.value.isEnabled]]),ce]),ue],32)])])])]))}},pe=$(me,[["__scopeId","data-v-19e2707f"]]),h=r=>(x("data-v-dd02f7aa"),r=r(),P(),r),be={class:"container mt-5"},_e=h(()=>e("h1",{class:"mb-4"},"香水電商後台管理",-1)),fe=h(()=>e("button",{class:"btn btn-primary mb-3","data-bs-toggle":"modal","data-bs-target":"#createPerfumeModal"}," 新增產品 ",-1)),ve={class:"table table-striped"},he=h(()=>e("thead",null,[e("tr",null,[e("th",{scope:"col"},"#"),e("th",{scope:"col"},"圖片"),e("th",{scope:"col"},"名稱"),e("th",{scope:"col"},"類別"),e("th",{scope:"col"},"價格"),e("th",{scope:"col"},"容量"),e("th",{scope:"col"},"操作")])],-1)),ge={scope:"row"},ye=["src"],$e=["onClick"],xe=["onClick"],Pe={__name:"AdminView",setup(r){const u=f([]),l=f(null);function m(t){l.value=t}const s=async()=>{try{const t=await v.get("https://perfume-express.onrender.com/perfumes");u.value=t.data,console.log(u.value)}catch(t){console.log(t)}};s();const c=async t=>{console.log(t);try{const o=await v.delete(`https://perfume-express.onrender.com/perfumes/${t}`);console.log(o.data),s()}catch(o){console.log(o)}};return(t,o)=>(b(),_("div",null,[e("div",be,[_e,fe,e("table",ve,[he,e("tbody",null,[(b(!0),_(C,null,U(u.value,(a,M)=>(b(),_("tr",{key:a._id},[e("th",ge,p(M+1),1),e("td",null,[e("img",{src:a.image,alt:"product image",class:"img-thumbnail",style:{width:"100px"}},null,8,ye)]),e("td",null,p(a.title),1),e("td",null,p(a.category),1),e("td",null,"$"+p(a.price),1),e("td",null,p(a.unit),1),e("td",null,[e("button",{class:"btn btn-primary btn-sm me-8","data-bs-toggle":"modal","data-bs-target":"#editMyCourseModal",onClick:V=>m(a)}," 編輯 ",8,$e),e("button",{class:"btn btn-danger btn-sm",onClick:V=>c(a._id)},"刪除",8,xe)])]))),128))])])]),g(H,{product:l.value,onUpdate:s},null,8,["product"]),g(pe,{onUpdate:s})]))}},Ve=$(Pe,[["__scopeId","data-v-dd02f7aa"]]);export{Ve as default};
